rules_version = '2';

// The admin UID must be replaced with the actual administrator's Firebase Auth UID.
service cloud.firestore {
  match /databases/{database}/documents {
    
    // Helper function to check if the user is an administrator
    function isAdmin() {
      return request.auth.uid == "REPLACE_WITH_ADMIN_UID";
    }

    // --- Private User Data Rules ---
    // Path: /artifacts/{appId}/users/{userId}/user_data
    match /artifacts/{appId}/users/{userId}/user_data {
      // Only the authenticated user matching the {userId} in the path can
      // read, create, or update their own data.
      allow read, create, update: if request.auth.uid == userId;
      
      // No one can delete their main user data document.
      allow delete: if false;
    }

    // --- Public Website Content Rules ---
    // Path: /artifacts/{appId}/public/data/website_content
    match /artifacts/{appId}/public/data/website_content {
      // Any authenticated user can read the public content.
      allow read: if request.auth != null;
      
      // Only the designated administrator can write (create, update, delete)
      // the public content.
      allow write: if isAdmin();
    }
  }
}
